(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"5kYI":function(n,t,l){"use strict";l.r(t);var i=l("CcnG"),e=function(){function n(n,t){this.route=n,this.router=t}return n.prototype.ngOnInit=function(){this.x=this.route.snapshot.paramMap.get("x"),this.y=this.route.snapshot.paramMap.get("y"),console.log("x, y:"+this.x+", "+this.y)},n}(),o=function(){return function(){}}(),u=l("pMnS"),r=l("oBZk"),s=l("ZZ/e"),c=l("ZYCi"),a=l("Ip0R"),h=function(){function n(n,t){this.x=n,this.y=t}return n.prototype.same=function(n){return!!n&&n.x===this.x&&this.y===n.y},n.prototype.adjacent=function(n){return!!n&&(n.x===this.x&&1===Math.abs(n.y-this.y)||n.y===this.y&&1===Math.abs(n.x-this.x))},n}(),p=function(){return function(n,t){this.value=n,this.position=t}}(),b=function(){function n(n,t){this.xSize=n,this.ySize=t,this.tiles=[],this.blank=new h(n-1,t-1);for(var l=this.shuffle(this.xSize*this.ySize-1),i=0;i<l.length;i++)this.tiles.push(new p(l[i],this.getPosition(i)));console.log(this.tiles)}return n.prototype.isSolved=function(){for(var n=0;n<this.tiles.length;n++)if(!this.isInRightPosition(this.tiles[n]))return!1;return!0},n.prototype.move=function(n){if(n.position.adjacent(this.blank)){var t=n.position;n.position=this.blank,this.blank=t}},n.prototype.getPosition=function(n){return new h(n%this.xSize,Math.floor(n/this.xSize))},n.prototype.isInRightPosition=function(n){return n.position.same(this.getPosition(n.value-1))},n.prototype.shuffle=function(n){for(var t,l,i=[],e=0;e<n;e++)i.push(e+1);for(var o=n;0!==o;){var u=Math.floor(Math.random()*o),r=i[--o];i[o]=i[u],i[u]=r,1===i[o]?t=o:2===i[o]&&(l=o)}return this.getInversionCount(i)%2!=0&&(i[t]=2,i[l]=1),i},n.prototype.getInversionCount=function(n){for(var t=0,l=0;l<n.length-1;l++)for(var i=l+1;i<n.length;i++)n[l]>n[i]&&t++;return t},n}(),d=l("6blF"),f=l("mrSG"),g=function(n){function t(t,l){var i=n.call(this,t,l)||this;return i.scheduler=t,i.work=l,i.pending=!1,i}return f.d(t,n),t.prototype.schedule=function(n,t){if(void 0===t&&(t=0),this.closed)return this;this.state=n;var l=this.id,i=this.scheduler;return null!=l&&(this.id=this.recycleAsyncId(i,l,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(i,this.id,t),this},t.prototype.requestAsyncId=function(n,t,l){return void 0===l&&(l=0),setInterval(n.flush.bind(n,this),l)},t.prototype.recycleAsyncId=function(n,t,l){if(void 0===l&&(l=0),null!==l&&this.delay===l&&!1===this.pending)return t;clearInterval(t)},t.prototype.execute=function(n,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var l=this._execute(n,t);if(l)return l;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(n,t){var l=!1,i=void 0;try{this.work(n)}catch(e){l=!0,i=!!e&&e||new Error(e)}if(l)return this.unsubscribe(),i},t.prototype._unsubscribe=function(){var n=this.id,t=this.scheduler,l=t.actions,i=l.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==i&&l.splice(i,1),null!=n&&(this.id=this.recycleAsyncId(t,n,null)),this.delay=null},t}(function(n){function t(t,l){return n.call(this)||this}return f.d(t,n),t.prototype.schedule=function(n,t){return void 0===t&&(t=0),this},t}(l("pugT").a)),y=function(){function n(t,l){void 0===l&&(l=n.now),this.SchedulerAction=t,this.now=l}return n.prototype.schedule=function(n,t,l){return void 0===t&&(t=0),new this.SchedulerAction(this,n).schedule(l,t)},n.now=function(){return Date.now()},n}(),v=new(function(n){function t(l,i){void 0===i&&(i=y.now);var e=n.call(this,l,function(){return t.delegate&&t.delegate!==e?t.delegate.now():i()})||this;return e.actions=[],e.active=!1,e.scheduled=void 0,e}return f.d(t,n),t.prototype.schedule=function(l,i,e){return void 0===i&&(i=0),t.delegate&&t.delegate!==this?t.delegate.schedule(l,i,e):n.prototype.schedule.call(this,l,i,e)},t.prototype.flush=function(n){var t=this.actions;if(this.active)t.push(n);else{var l;this.active=!0;do{if(l=n.execute(n.state,n.delay))break}while(n=t.shift());if(this.active=!1,l){for(;n=t.shift();)n.unsubscribe();throw l}}},t}(y))(g),m=l("isby");function k(n){return!Object(m.a)(n)&&n-parseFloat(n)+1>=0}var x=l("nkY7");function w(n){var t=n.index,l=n.period,i=n.subscriber;if(i.next(t),!i.closed){if(-1===l)return i.complete();n.index=t+1,this.schedule(n,l)}}var S=l("HNzf"),z=function(){function n(n,t){this.platform=n,this.nativeStorage=t}return n.prototype.ngOnInit=function(){this.tileSize=this.calculateTileSize(),this.startGame()},n.prototype.startGame=function(){var n=this;this.timeSubscription&&this.timeSubscription.unsubscribe(),this.grid=new b(this.x,this.y),this.solved=!1;var t=function(n,t,l){void 0===n&&(n=0);var i=-1;return k(1e3)?i=Number(1e3)<1?1:Number(1e3):Object(x.a)(1e3)&&(l=1e3),Object(x.a)(l)||(l=v),new d.a(function(t){var e=k(n)?n:+n-l.now();return l.schedule(w,e,{index:0,period:i,subscriber:t})})}(0);this.timeSubscription=t.subscribe(function(t){n.time=t,console.log(n.time)})},n.prototype.ngOnDestroy=function(){this.timeSubscription.unsubscribe()},n.prototype.move=function(n){this.solved||(this.grid.move(n),this.grid.isSolved()&&(this.solved=!0,this.timeSubscription.unsubscribe(),this.setRecord(this.time)))},n.prototype.getGridStyle=function(){var n={};return n.width=this.tileSize*this.x+4+"px",n.height=this.tileSize*this.y+4+"px",n},n.prototype.getTileStyle=function(n){var t={};return t.transform="translate("+n.position.x*this.tileSize+"px, "+n.position.y*this.tileSize+"px)",t.height=this.tileSize+"px",t.width=this.tileSize+"px",t.padding=Math.floor((this.tileSize-20)/2)+"px 0",t},n.prototype.calculateTileSize=function(){var n=this.platform.width();return(n=Math.floor(.9*n/this.x))>100?100:n},n.prototype.setRecord=function(n){var t=this,l=this.getPuzzleName(this.x,this.y);this.nativeStorage.getItem(l).then(function(i){console.log("existing record: "+i),t.isNewRecord(n,i)&&t.nativeStorage.setItem(l,n).then(function(n){return console.error("Error storing new record")})})},n.prototype.getPuzzleName=function(n,t){return n+"x"+t},n.prototype.isNewRecord=function(n,t){return n<t},n}(),I=i.nb({encapsulation:0,styles:[[".puzzle[_ngcontent-%COMP%]{display:block;margin-left:auto;margin-right:auto;text-align:center}.grid[_ngcontent-%COMP%]{display:inline-block;align-content:end;background-color:#00f;padding:2px;align-self:center}.tile[_ngcontent-%COMP%]{background-color:rgba(255,255,255,.8);border:1px solid #00f;border-radius:5px;text-align:center;position:absolute;transition:-webkit-transform .1s;transition:transform .1s;transition:transform .1s,-webkit-transform .1s;font-weight:700}"]],data:{}});function M(n){return i.Eb(0,[(n()(),i.pb(0,0,null,null,2,"div",[["class","tile"]],null,[[null,"click"]],function(n,t,l){var i=!0;return"click"===t&&(i=!1!==n.component.move(n.context.$implicit)&&i),i},null,null)),i.ob(1,278528,null,0,a.k,[i.t,i.k,i.D],{ngStyle:[0,"ngStyle"]},null),(n()(),i.Db(2,null,["",""]))],function(n,t){n(t,1,0,t.component.getTileStyle(t.context.$implicit))},function(n,t){n(t,2,0,t.context.$implicit.value)})}function O(n){return i.Eb(0,[(n()(),i.pb(0,0,null,null,21,"div",[["class","puzzle"]],null,null,null,null,null)),(n()(),i.pb(1,0,null,null,3,"ion-text",[["color","dark"]],null,null,null,r.s,r.i)),i.ob(2,49152,null,0,s.tb,[i.h,i.k],{color:[0,"color"]},null),(n()(),i.pb(3,0,null,0,1,"h2",[],null,null,null,null,null)),(n()(),i.Db(4,null,["Time: ","s"])),(n()(),i.pb(5,0,null,null,3,"div",[["class","grid"]],null,null,null,null,null)),i.ob(6,278528,null,0,a.k,[i.t,i.k,i.D],{ngStyle:[0,"ngStyle"]},null),(n()(),i.gb(16777216,null,null,1,null,M)),i.ob(8,278528,null,0,a.h,[i.O,i.L,i.s],{ngForOf:[0,"ngForOf"]},null),(n()(),i.pb(9,0,null,null,12,"ion-grid",[],null,null,null,r.p,r.f)),i.ob(10,49152,null,0,s.x,[i.h,i.k],null,null),(n()(),i.pb(11,0,null,0,10,"ion-row",[],null,null,null,r.r,r.h)),i.ob(12,49152,null,0,s.fb,[i.h,i.k],null,null),(n()(),i.pb(13,0,null,0,1,"ion-col",[],null,null,null,r.n,r.d)),i.ob(14,49152,null,0,s.q,[i.h,i.k],null,null),(n()(),i.pb(15,0,null,0,4,"ion-col",[],null,null,null,r.n,r.d)),i.ob(16,49152,null,0,s.q,[i.h,i.k],null,null),(n()(),i.pb(17,0,null,0,2,"ion-button",[["expand","block"]],null,[[null,"click"]],function(n,t,l){var i=!0;return"click"===t&&(i=!1!==n.component.startGame()&&i),i},r.l,r.b)),i.ob(18,49152,null,0,s.h,[i.h,i.k],{expand:[0,"expand"]},null),(n()(),i.Db(-1,0,["Restart Game"])),(n()(),i.pb(20,0,null,0,1,"ion-col",[],null,null,null,r.n,r.d)),i.ob(21,49152,null,0,s.q,[i.h,i.k],null,null)],function(n,t){var l=t.component;n(t,2,0,"dark"),n(t,6,0,l.getGridStyle()),n(t,8,0,l.grid.tiles),n(t,18,0,"block")},function(n,t){n(t,4,0,t.component.time)})}var P=i.nb({encapsulation:0,styles:[["ion-content[_ngcontent-%COMP%]{--background:var(--background-color, rgb(169, 243, 248))}"]],data:{}});function C(n){return i.Eb(0,[(n()(),i.pb(0,0,null,null,14,"ion-content",[],null,null,null,r.o,r.e)),i.ob(1,49152,null,0,s.r,[i.h,i.k],null,null),(n()(),i.pb(2,0,null,0,10,"ion-toolbar",[],null,null,null,r.t,r.j)),i.ob(3,49152,null,0,s.yb,[i.h,i.k],null,null),(n()(),i.pb(4,0,null,0,8,"ion-buttons",[["slot","start"]],null,null,null,r.m,r.c)),i.ob(5,49152,null,0,s.i,[i.h,i.k],null,null),(n()(),i.pb(6,0,null,0,6,"ion-button",[],null,[[null,"click"]],function(n,t,l){var e=!0;return"click"===t&&(e=!1!==i.yb(n,8).onClick()&&e),"click"===t&&(e=!1!==i.yb(n,10).onClick(l)&&e),e},r.l,r.b)),i.ob(7,49152,null,0,s.h,[i.h,i.k],null,null),i.ob(8,16384,null,0,c.n,[c.m,c.a,[8,null],i.D,i.k],{routerLink:[0,"routerLink"]},null),i.zb(9,1),i.ob(10,737280,null,0,s.Gb,[a.g,s.Db,i.k,c.m,[2,c.n]],null,null),(n()(),i.pb(11,0,null,0,1,"ion-icon",[["name","arrow-round-back"],["slot","icon-only"]],null,null,null,r.q,r.g)),i.ob(12,49152,null,0,s.z,[i.h,i.k],{name:[0,"name"]},null),(n()(),i.pb(13,0,null,0,1,"app-puzzle",[],null,null,null,O,I)),i.ob(14,245760,null,0,z,[s.Eb,S.a],{x:[0,"x"],y:[1,"y"]},null)],function(n,t){var l=t.component,i=n(t,9,0,"/");n(t,8,0,i),n(t,10,0),n(t,12,0,"arrow-round-back"),n(t,14,0,l.x,l.y)},null)}function j(n){return i.Eb(0,[(n()(),i.pb(0,0,null,null,1,"app-play",[],null,null,null,C,P)),i.ob(1,114688,null,0,e,[c.a,c.m],null,null)],function(n,t){n(t,1,0)},null)}var A=i.lb("app-play",e,j,{},{},[]),q=l("gIcY"),D=function(){return function(){}}();l.d(t,"PlayPageModuleNgFactory",function(){return G});var G=i.mb(o,[],function(n){return i.vb([i.wb(512,i.j,i.bb,[[8,[u.a,A]],[3,i.j],i.x]),i.wb(4608,a.j,a.i,[i.u,[2,a.q]]),i.wb(4608,q.c,q.c,[]),i.wb(4608,s.a,s.a,[i.z,i.g]),i.wb(4608,s.Cb,s.Cb,[s.a,i.j,i.q,a.c]),i.wb(4608,s.Fb,s.Fb,[s.a,i.j,i.q,a.c]),i.wb(1073742336,a.b,a.b,[]),i.wb(1073742336,q.b,q.b,[]),i.wb(1073742336,q.a,q.a,[]),i.wb(1073742336,s.Ab,s.Ab,[]),i.wb(1073742336,D,D,[]),i.wb(1073742336,c.o,c.o,[[2,c.u],[2,c.m]]),i.wb(1073742336,o,o,[]),i.wb(1024,c.k,function(){return[[{path:"",component:e}]]},[])])})}}]);